case $context in
    lmdb | lmdb-nodnssec)
        cat > pdns-lmdb.conf << __EOF__
module-dir=./modules
launch=lmdb
lmdb-filename=./pdns.lmdb
__EOF__

        skipreasons="$skipreasons lmdb nodyndns"
        rm -f pdns.lmdb*
        for zone in $(grep 'zone ' named.conf  | cut -f2 -d\" | grep -v '^nztest.com$')
        do
            if [ "$zone" = "." ]; then
                        $PDNSUTIL --config-dir=. --config-name=lmdb load-zone $zone zones/ROOT
            else
                        $PDNSUTIL --config-dir=. --config-name=lmdb load-zone $zone zones/$zone
            fi

            if [ $context != lmdb-nodnssec ]
            then
                extracontexts="dnssec"
                skipreasons="$skipreasons nodyndns"
                securezone $zone lmdb
            else
                skipreasons="$skipreasons nodnssec nodyndns"
                $PDNSUTIL --config-dir=. --config-name=lmdb rectify-zone $zone 2>&1
            fi
            if [ "$zone" = "tsig.com" ]; then
                $PDNSUTIL --config-dir=. --config-name=lmdb import-tsig-key test $ALGORITHM $KEY
                $PDNSUTIL --config-dir=. --config-name=lmdb activate-tsig-key tsig.com test master
            fi
        done

        $RUNWRAPPER $PDNS --daemon=no --local-address=$address --local-port=$port --config-dir=. \
            --config-name=lmdb --socket-dir=./ --no-shuffle \
            --query-logging --dnsupdate=no \
            --expand-alias=yes --outgoing-axfr-expand-alias=yes \
            --resolver=8.8.8.8 \
            --cache-ttl=$cachettl --dname-processing $lua_prequery &

        ;;
    *)
        nocontext=yes
esac
